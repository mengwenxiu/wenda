{% extends "./layout/layout.html" %} 

{% block style %}
<link rel="stylesheet" href="/static/css/register.css"> 
{% endblock %} 

{% block body %}
<div class="aw-register-box">
  <div class="mod-head">
    <a href=""><img src="http://wenda.golaravel.com/static/css/default/img/login_logo.png" alt=""></a>
    <h1>注册新用户</h1>
  </div>
  <div class="mod-body">
    <form class="aw-register-form" action="/account/register" method="post" id="register_form">
      <ul>
        <li class="alert alert-danger hide error_message text-left">
          <i class="icon icon-delete"></i> <em></em>
        </li>
        <li>
          <input class="aw-register-name form-control" type="text" name="username" placeholder="用户名" tips="请输入一个 2-14 位的用户名" errortips="用户名长度不符合" value="">
          <span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>用户名长度不符合</span></li>
        <li>
          <input class="aw-register-email form-control" type="text" placeholder="邮箱" name="email" tips="请输入你常用的电子邮箱作为你的账号" value="" errortips="邮箱格式不正确">
        </li>
        <li>
          <input class="aw-register-pwd form-control" type="password" name="password" placeholder="密码" tips="请输入 6-16 个字符,区分大小写" errortips="密码不符合规则">
        </li>
        <li class="more-information hide">
          <ul>
            <li>
              性别:
              <label>
                <input name="sex" id="sex" value="1" type="radio"> 男 </label>&nbsp;
              <label>
                <input name="sex" id="sex" value="2" type="radio"> 女 </label>&nbsp;
              <label>
                <input name="sex" id="sex" value="3" type="radio" checked="checked"> 保密 </label>
            </li>
            <li>
              所在城市:
              <select name="province" class="select_area" style="display:inline-block">
                <option value="">请选择省份或直辖市</option>
                <option value="安徽省">安徽省</option>
                <option value="北京市">北京市</option>
                <option value="福建省">福建省</option>
                <option value="甘肃省">甘肃省</option>
                <option value="广东省">广东省</option>
                <option value="广西壮族自治区">广西壮族自治区</option>
                <option value="贵州省">贵州省</option>
                <option value="海南省">海南省</option>
                <option value="河北省">河北省</option>
                <option value="河南省">河南省</option>
                <option value="黑龙江省">黑龙江省</option>
                <option value="湖北省">湖北省</option>
                <option value="湖南省">湖南省</option>
                <option value="吉林省">吉林省</option>
                <option value="江苏省">江苏省</option>
                <option value="江西省">江西省</option>
                <option value="辽宁省">辽宁省</option>
                <option value="内蒙古自治区">内蒙古自治区</option>
                <option value="宁夏回族自治区">宁夏回族自治区</option>
                <option value="青海省">青海省</option>
                <option value="山东省">山东省</option>
                <option value="山西省">山西省</option>
                <option value="陕西省">陕西省</option>
                <option value="上海市">上海市</option>
                <option value="四川省">四川省</option>
                <option value="天津市">天津市</option>
                <option value="西藏自治区">西藏自治区</option>
                <option value="新疆维吾尔自治区">新疆维吾尔自治区</option>
                <option value="云南省">云南省</option>
                <option value="浙江省">浙江省</option>
                <option value="重庆市">重庆市</option>
                <option value="香港">香港</option>
                <option value="澳门">澳门</option>
                <option value="台湾">台湾</option>
              </select>
              <select name="city" class="select_area"></select>
            </li>
            <li>
              <input type="text" class="form-control" placeholder="一句话介绍" id="welcome_signature" value="" name="signature">
            </li>
          </ul>
        </li>
        <li>
          <hr>
          <a class="more-information-btn">更多资料</a>
        </li>
        <li class="aw-register-verify">
          <img class="pull-right" id="captcha" onclick="this.src = G_BASE_URL + '/account/captcha/' + Math.floor(Math.random() * 10000);" src="http://wenda.golaravel.com/account/captcha/">
          <input type="text" class="form-control" name="seccode_verify" placeholder="验证码">
        </li>
        <li class="last">
          <label>
            <input type="checkbox" checked="checked" value="agree" name="agreement_chk"> 我同意</label> <a href="javascript:;" class="aw-agreement-btn">用户协议</a>
          <a href="http://wenda.golaravel.com/login/" class="pull-right">已有账号?</a>
          <div class="aw-regiter-agreement hide">
            <div class="aw-register-agreement-txt" id="register_agreement">当您申请用户时，表示您已经同意遵守本规章。
              <br> 欢迎您加入本站点参与交流和讨论，本站点为社区，为维护网上公共秩序和社会稳定，请您自觉遵守以下条款：
              <br>
              <br> 一、不得利用本站危害国家安全、泄露国家秘密，不得侵犯国家社会集体的和公民的合法权益，不得利用本站制作、复制和传播下列信息：
              <br> 　（一）煽动抗拒、破坏宪法和法律、行政法规实施的；
              <br> 　（二）煽动颠覆国家政权，推翻社会主义制度的；
              <br> 　（三）煽动分裂国家、破坏国家统一的；
              <br> 　（四）煽动民族仇恨、民族歧视，破坏民族团结的；
              <br> 　（五）捏造或者歪曲事实，散布谣言，扰乱社会秩序的；
              <br> 　（六）宣扬封建迷信、淫秽、色情、赌博、暴力、凶杀、恐怖、教唆犯罪的；
              <br> 　（七）公然侮辱他人或者捏造事实诽谤他人的，或者进行其他恶意攻击的；
              <br> 　（八）损害国家机关信誉的；
              <br> 　（九）其他违反宪法和法律行政法规的；
              <br> 　（十）进行商业广告行为的。
              <br>
              <br> 二、互相尊重，对自己的言论和行为负责。
              <br> 三、禁止在申请用户时使用相关本站的词汇，或是带有侮辱、毁谤、造谣类的或是有其含义的各种语言进行注册用户，否则我们会将其删除。
              <br> 四、禁止以任何方式对本站进行各种破坏行为。
              <br> 五、如果您有违反国家相关法律法规的行为，本站概不负责，您的登录信息均被记录无疑，必要时，我们会向相关的国家管理部门提供此类信息。
            </div>
          </div>
        </li>
        <li class="clearfix">
          <button class="btn btn-large btn-blue btn-block">注册</button>
        </li>
      </ul>
    </form>
  </div>
  <div class="mod-footer"></div>
</div>
{% endblock %} 

{% block script %}
<script>
  $('#register_form').on('submit', function (e) {
    // 1. 前端表单验证
    // 2. 异步请求
    // 3. 根据返回结果做交互判断
    $.ajax({
      url: $(this).attr('action'),
      type: $(this).attr('method'),
      data: $(this).serialize(),
      dataType: 'json',
      success: function (data) {
        if (data.status === 'OK') {
          window.alert('恭喜，注册成功')
          window.location.href = '/'
        } else if (data.status === 'Error') {
          window.alert(data.error_message)
        }
      }
    })
    return false
  })
</script>
{% endblock %}
